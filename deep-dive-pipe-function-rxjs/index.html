<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head><meta name="generator" content="Hexo 3.8.0">

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="Version 5 of RxJS introduced the concept of lettable (also known as pipeable) operators. Version 6 went one step further and deprecated the old way of">
    

    <!--Author-->
    
        <meta name="author" content="Miłosz Piechocki">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="Deep dive into pipe function in RxJS">
    

    <!--Open Graph Description-->
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="codewithstyle.info">

    <!--Type page-->
    
        <meta property="og:type" content="article">
    

    <!--Page Cover-->
    

    <meta name="twitter:card" content="summary">
    

    <!-- Title -->
    
    <title>Deep dive into pipe function in RxJS - codewithstyle.info</title>

    <!-- Tachyons Core CSS -->
    <link rel="stylesheet" href="//unpkg.com/tachyons/css/tachyons.min.css">

    <!-- Custom Fonts -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Google Analytics -->
    


</head>


<body>

<!-- Main Content -->
<!-- Banner -->
<!-- Banner -->
<div class="w-100 bg-1 text-light">
    
    <div class="w-100">
        <nav class="db flex-l pv3 mw8 center items-center-l">
            <a class="db v-mid link dim w-100 w-25-l tc tl-l mb2 mb0-l white" href="/" title="codewithstyle.info">
                <img src="https://codewithstyle.info/wp-content/uploads/2017/07/CODE-WITHSTYLE-1.png" class="dib h3" alt="codewithstyle.info">
            </a>
            <div class="db v-mid w-100 w-75-l tc tr-l">
                
                    <a class="link dim f6 f5-l dib mr3 mr4-l white" href="/" title="Home">
                        Home
                    </a>
                
                    <a class="link dim f6 f5-l dib mr3 mr4-l white" href="/functional-programming" title="Functional Programming">
                        Functional Programming
                    </a>
                
                    <a class="link dim f6 f5-l dib mr3 mr4-l white" href="/archives" title="Archives">
                        Archives
                    </a>
                
                    <a class="link dim f6 f5-l dib mr3 mr4-l white" href="http://miloszpiechocki.com/" title="Author">
                        Author
                    </a>
                
            </div>
        </nav>
    </div>

    <!-- Title -->
    <div class="w-100 vh-40 dt">
        <div class="v-mid white center mw8">
            <h1 class="f1-l f2-m tc tc-m tl-ns">Deep dive into pipe function in RxJS</h1>
            <p class="f4 fw3 pab-100px tc tc-m tl-ns">2018-07-02</p>
        </div>
    </div>

    <!-- Icon -->
    <div class="relative w-100 mw8 center white dn dn-m db-ns">
        <i class="header-icon "></i>
    </div>
</div>

<!-- Content -->
<div class="w-100 ph2 ph4-m ph5-l mv5 mv6-l">
    <div class="content">
        <div class="mw8 center">
            <div class="cf">
                <div class="fl w-100 w-70-l mw7 left fw3 lh-copy pr4-ns pr0-m post-content">
                    <!-- Tags Vertical -->
                    

                    <!-- Main Post Content -->
                    <p>Version 5 of RxJS introduced the concept of <em>lettable</em> (also known as <em>pipeable</em>) operators. Version 6 went one step further and deprecated the old way of calling operators (method chaining). You might have already used the <code>pipe</code> function. But do you really understand what it does? <img src="https://codewithstyle.info/wp-content/uploads/2018/06/Monads-part3-—-kopia.png" alt=""></p>
<h2 id="Composing-functions"><a href="#Composing-functions" class="headerlink" title="Composing functions"></a>Composing functions</h2><p>RxJS is often called a <strong>functional-reactive programming</strong> library. It should not come as a surprise that you will find many functional programming inspirations in it. One of them is the <code>pipe</code> function. Take a look at the below piece of code:</p>
<pre><code>const getElement = 
    (id) =&gt; document.getElementById(id);

const getValue = 
    (element) =&gt; element.value;

function logElementValue(id) {
  const el = getElement(id);
  const value = getValue(el);
  console.log(value);
}
</code></pre><p>The <code>logElementValue</code> function takes an <code>id</code> and logs to the console the value of the element with provided <code>id</code>. Can you see a pattern in this function’s implementation? Firstly, it calls <code>getElement</code> with <code>id</code> and stores the result in <code>el</code>. Next, the result is passed to <code>getValue</code> which produces a new result, <code>el</code>. Finally, <code>el</code> is passed to <code>console.log</code>. What this function does is simply taking the result of a function and passing it as an argument to another function. Is there a better, more concise way to implement this function? Let’s say we just have two functions (<code>getElement</code> and <code>getValue</code>). We will implement a generic function called <code>compose</code> that will pass the result of <code>getElement</code> to <code>getValue</code>.</p>
<pre><code>const compose = (f, g) =&gt; x =&gt; g(f(x));
</code></pre><p>The definition is very simple but may take a moment to parse. We’ve defined a function that takes two functions <code>f</code> and <code>g</code> (that would be <code>getElement</code> and <code>getValue</code> in our case) and returns a new function. This new function will take an argument, pass it to <code>f</code> and then pass the result to <code>g</code>. That’s exactly what we need! Now I can rewrite <code>logElementValue</code>:</p>
<pre><code>function logElementValue(id) {
  const getValueFromId = compose(getElement, getValue);
  const value = getValueFromId(id);
  console.log(value);
}
</code></pre><h2 id="How-about-more-than-two-functions"><a href="#How-about-more-than-two-functions" class="headerlink" title="How about more than two functions?"></a>How about more than two functions?</h2><p>But, wait! Once we have the result of calling <code>getValueFromId</code> we immediately pass it to <code>console.log</code>. So it’s the same pattern here. We could write it like this:</p>
<pre><code>function logElementValue(id) {
  const getValueFromId = compose(getElement, getValue);
  const logValue = compose(getValueFromId, console.log);
  logValue(id);
}
</code></pre><p>But life would be much simpler if <code>compose</code> could take any number of functions. Can we do this? Sure:</p>
<pre><code>const composeMany = (...args) =&gt; args.reduce(compose);
</code></pre><p>Another brain teaser! <code>composeMany</code> takes any number of functions. They are stored in <code>args</code> array. We <code>reduce</code> over <code>args</code> composing every function with the result of composing previous functions. Anyway, the results is a function that takes any number of functions and will pass the result of <code>N-th</code> function to <code>(N+1)-th</code> function. But what have we achieved by that?</p>
<pre><code>function logElementValue(id) {  
  const logValue = composeMany(getElement, getValue, console.log);
  logValue(id);
}
</code></pre><p>Which can be simplified even more:</p>
<pre><code>const logElementValue = composeMany(getElement, getValue, console.log);
</code></pre><p>Isn’t that cool? We have significantly simplified the code. It’s now very clear what <code>logElementValue</code> does. And by the way - <code>composeMany</code> is just a name a came up with. The official name is <code>pipe</code>!</p>
<pre><code>const logElementValue = pipe(getElement, getValue, console.log);
</code></pre><h2 id="Back-to-RxJS"><a href="#Back-to-RxJS" class="headerlink" title="Back to RxJS"></a>Back to RxJS</h2><p>Let’s take an example of <code>pipe</code> usage in RxJS.</p>
<pre><code>number$.pipe(
    map(n =&gt; n * n),
    filter(n =&gt; n % 2 === 0)
);
</code></pre><p>We can also write it in a different way:</p>
<pre><code>const { pipe } = rxjs;

const transformNumbers = pipe(
     map(x =&gt; x * x),
     filter(x =&gt; x % 2 === 0),
);

transformNumbers(number$).subscribe(console.log);
</code></pre><p>And the result is exactly the same! As you can see, the <code>pipe</code> function in RxJS behaves in exactly the same way that the <code>pipe</code> function that we’ve defined in the first part of the article. It takes a number of functions and composes them by passing the result of a function as an argument to another function. You might say that this is different than the previous example because here we’re invoking <code>map</code> and <code>filter</code> and not simply passing them. Actually, both <code>map</code> and <code>filter</code> will return functions. We’re not composing <code>map</code> and <code>filter</code> themselves but rather the functions returned by invoking them. You can check out how RxJS implements <code>pipe</code> function <a href="https://github.com/ReactiveX/rxjs/blob/94156a214f905555b6e57bc3f7cf965629028406/src/internal/util/pipe.ts" target="_blank" rel="noopener">here</a>.</p>
<h2 id="Pipeline-operator"><a href="#Pipeline-operator" class="headerlink" title="Pipeline operator"></a>Pipeline operator</h2><p>Our function is such a useful concept that it might be added as a separate operator to the JavaScript language! It would mean that the example from the previous article can be written in an even simpler way:</p>
<pre><code>const logElementValue = getElement |&gt; getValue |&gt; console.log;
</code></pre><p>You can see the details of the proposal <a href="https://github.com/tc39/proposal-pipeline-operator" target="_blank" rel="noopener">here</a>.</p>
<h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>I hope this article helped you understand what <code>pipe</code> function is all about. You should now feel more comfortable using it! The fact that RxJS migrated from the traditional, object-oriented approach of applying operators to the pipeline approach shows how strong the influence of functional programming is nowadays. I think that’s great! Let me know in comments if you prefer <code>pipe</code> function to traditional method chaining. [yikes-mailchimp form=”1” description=”1”]</p>

                    
                    <!-- Tags Bottom -->
                    

                    <!-- Comments -->
                    



                </div>
                <div class="fl w-100 w-30-l center fw3 lh-copy pl4-ns tl black-50">
                    
                    <hr class="dn-l mw4 black-50 mt5">
                    
                    <div class="mt5 mt0-l">
    <article class="dt db-l mw8 mw8-m mw5-ns center ml0-l bg-white mv3">
        <div class="dn dtc-m db-l v-mid tc pr4 pr0-l" style="min-width: 6rem;">
            <img src="https://codewithstyle.info/wp-content/uploads/2017/02/miloszpiechocki.jpeg" class="mb4-l br-100 h3 w3 h4-l w4-l dib" title="Miłosz Piechocki">
        </div>
        <div class="dtc db-l v-mid lh-copy measure center f6 black-50 tj">
            Hi! My name is Miłosz Piechocki. I’m a software developer living in Warsaw, Poland. I’m passionate about functional programming and in particular how it’s applied in modern web technologies.
        </div>
    </article>
</div>

                    <hr class="dn-l mw4 black-50 mt5">

                    <div class="mt5 tc tl-l">
    <h3>Download free e-book</h3>
    <p class="tj f6 lh-copy">Subscribe to receive updates about new posts and I will send you a link to a free e-book about functional programming in JavaScript.</p>
    <!-- Begin Mailchimp Signup Form -->
    <div id="mc_embed_signup">
        <form action="https://codewithstyle.us15.list-manage.com/subscribe/post?u=9387aca2477532e2e033cee17&amp;id=7c51853ca5" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate="">
            <div id="mc_embed_signup_scroll">
                <div class="mc-field-group">
                    <input class="pa2 input-reset ba bg-transparent w-100" type="email" value="" name="EMAIL" id="mce-EMAIL" placeholder="enter your email">
                </div>
                <div id="mce-responses" class="clear">
                    <div class="response" id="mce-error-response" style="display:none"></div>
                    <div class="response" id="mce-success-response" style="display:none"></div>
                </div>    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
                <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_9387aca2477532e2e033cee17_7c51853ca5" tabindex="-1" value=""></div>
                <div class="clear mt2">
                    <input class="b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6 dib" type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe">
                </div>
            </div>
        </form>
    </div>
    <!--End mc_embed_signup-->
</div>

                    
                </div>
            </div>
        </div>
    </div>
</div>


<!-- Footer -->
<div class="bg-1 ph2 ph5-ns pv5">
        <div class="mv8">
            <div class="center tc">
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="http://twitter.com/miloszpp/" target="_blank">
                            <i class="fab fa-twitter"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="http://facebook.com/codewithstyle.info/" target="_blank">
                            <i class="fab fa-facebook"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="https://github.com/miloszpp" target="_blank">
                            <i class="fab fa-github"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="https://www.youtube.com/channel/UC_DEBDpgRyBZAT85tJ1QZBw" target="_blank">
                            <i class="fab fa-youtube"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="mailto:milosz@miloszpiechocki.com" target="_blank">
                            <i class="fas fa-envelope"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="/#" target="_blank">
                            <i class="fas fa-rss"></i>
                        </a>
                    </div>
                
            </div>
            <div class="f6 f5-ns center tc white pt5 fw3">
                @Copyright Miłosz Piechocki. All right reserved | Design & Hexo based on Anodyne by <a class="link dim white" href="http://www.codeblocq.com/">Jonathan Klughertz</a>
            </div>
        </div>
    </div>

<!-- After Footer -->
<!-- Disqus Comments -->



</body>

</html>