<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!--Description-->
  
  <meta name="description" content="Everyone’s excited about incremental builds in the upcoming TypeScript version. However, there is another, at least as interesting, feature in this re">
  

  <!--Author-->
  
  <meta name="author" content="Miłosz Piechocki">
  

  <!--Open Graph Title-->
  
  <meta property="og:title" content="TypeScript 3.4 hidden gem: propagated generic type arguments">
  

  <!--Open Graph Description-->
  

  <!--Open Graph Site Name-->
  <meta property="og:site_name" content="codewithstyle.info">

  <!--Type page-->
  
  <meta property="og:type" content="article">
  

  <!--Page Cover-->
  
  <meta property="og:image" content="https://codewithstyle.info/images/posts/gem.jpg">
  <meta property="twitter:image" content="https://codewithstyle.info/images/posts/gem.jpg">
  <meta name="twitter:card" content="summary_large_image">
   

  <!-- Title -->
  
  <title>TypeScript 3.4 hidden gem: propagated generic type arguments - codewithstyle.info</title>

  <!-- Tachyons Core CSS -->
  <link rel="stylesheet" href="//unpkg.com/tachyons/css/tachyons.min.css">

  <!-- Custom Fonts -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">

  
  <link rel="amphtml" href="https://codewithstyle.info/TypeScript-3-4-hidden-gem-propagated-generic-type-arguments//amp/index.html">
  

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/style.css">

  <!-- Google Analytics -->
  
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-89535231-1', 'auto');
        ga('send', 'pageview');

    </script>



  <!-- Twitter -->
  <script>
    window.twttr = (function (d, s, id) {
      var js,
        fjs = d.getElementsByTagName(s)[0],
        t = window.twttr || {};
      if (d.getElementById(id)) return t;
      js = d.createElement(s);
      js.id = id;
      js.src = "https://platform.twitter.com/widgets.js";
      fjs.parentNode.insertBefore(js, fjs);

      t._e = [];
      t.ready = function (f) {
        t._e.push(f);
      };

      return t;
    })(document, "script", "twitter-wjs");
  </script>

  <!-- MailerLite Universal -->
  <script>
    (function (m, a, i, l, e, r) {
      m["MailerLiteObject"] = e;
      function f() {
        var c = { a: arguments, q: [] };
        var r = this.push(c);
        return "number" != typeof r ? r : f.bind(c.q);
      }
      f.q = f.q || [];
      m[e] = m[e] || f.bind(f.q);
      m[e].q = m[e].q || f.q;
      r = a.createElement(i);
      var _ = a.getElementsByTagName(i)[0];
      r.async = 1;
      r.src = l + "?v" + ~~(new Date().getTime() / 1000000);
      _.parentNode.insertBefore(r, _);
    })(
      window,
      document,
      "script",
      "https://static.mailerlite.com/js/universal.js",
      "ml"
    );

    var ml_account = ml("accounts", "1785990", "w8k8t0a5z1", "load");
  </script>
  <!-- End MailerLite Universal -->
</head>


<body>

<!-- Main Content -->
<!-- Banner -->
<!-- Banner -->
<div class="w-100 bg-1 text-light">
  <div class="w-100">
    <nav class="db flex-l pv3 mw8 center items-center-l">
      <a class="db v-mid link dim w-100 w-25-l tc tl-l mb2 mb0-l white" href="/" title="codewithstyle.info">
        <img src="/images/2017/07/CODE-WITHSTYLE-1.png" class="dib h3" alt="codewithstyle.info">
      </a>
      <div class="db v-mid w-100 w-75-l tc tr-l">
        
        <a class="link dim f6 f5-l dib mr3 mr4-l white" href="/toc" title="Table of Contents">
          Table of Contents
        </a>
        
        <a class="link dim f6 f5-l dib mr3 mr4-l white" href="/tags/typescript" title="TypeScript">
          TypeScript
        </a>
        
        <a class="link dim f6 f5-l dib mr3 mr4-l white" href="/functional-programming" title="Functional Programming">
          Functional Programming
        </a>
        
        <a class="link dim f6 f5-l dib mr3 mr4-l white" href="http://miloszpiechocki.com/" title="Author">
          Author
        </a>
        
      </div>
    </nav>
  </div>

  <!-- Title -->
  <div class="w-100 vh-40 dt" style="background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)),
    url('/images/posts/gem.jpg'); background-size: cover; background-position: center">
    <div class="v-mid white center mw8">
      <h1 class="f1-l f2-m tc tc-m tl-ns">TypeScript 3.4 hidden gem: propagated generic type arguments</h1>
      <p class="f4 fw3 pab-100px tc tc-m tl-ns">2019-03-18</p>
    </div>
  </div>

  <div class="w-100 bt">
    <section class="pa2 mw8 center white">
      <a class="link white dim" href="https://typescriptmasterclass.com">
        🔥 Check out my <em>Advanced TypeScript Masterclass e-book</em> 🔥
      </a>
    </section>
  </div>
</div>


<!-- Content -->
<div class="w-100 ph2 ph4-m ph5-l mv5 mv6-l">
    <div class="content">
        <div class="mw8 center">
            <div class="cf">
                <div class="fl w-100 w-70-l mw7 left fw3 lh-copy pr4-ns pr0-m post-content">
                    <!-- Tags Vertical -->
                    
                        <div class="tags-container-vertical">
                            <div class="tags-sub-container">
                                <a class="fw3 ph1 dib" href="/tags/typescript/">#typescript</a> <a class="fw3 ph1 dib" href="/tags/functional-programming/">#functional programming</a> <a class="fw3 ph1 dib" href="/tags/pointfree-style/">#pointfree style</a>
                            </div>
                        </div>
                    

                    <!-- Main Post Content -->
                    <p>Everyone’s excited about incremental builds in the upcoming TypeScript version. However, there is another, at least as interesting, feature in this release. Hidden at the very bottom of the <a href="https://devblogs.microsoft.com/typescript/announcing-typescript-3-4-rc/" target="_blank" rel="noopener">TypeScript 3.4 RC announcement</a> lies a humble section called <em>Propagated generic type arguments</em>.</p>
<p>In fact, <a href="https://en.wikipedia.org/wiki/Anders_Hejlsberg" target="_blank" rel="noopener">Anders Hejlsberg</a> himself is excited about this feature 😉</p>
<p><blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">Really excited about this one…<a href="https://t.co/bbTF9bdFO5" target="_blank" rel="noopener">https://t.co/bbTF9bdFO5</a></p>&mdash; Anders Hejlsberg (@ahejlsberg) <a href="https://twitter.com/ahejlsberg/status/1102694547262328832?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">March 4, 2019</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script> </p>
<p>So, what’s the meaning of this enigmatic update in TypeScript?</p>
<p><strong>Note:</strong> at the moment of writing TypeScript 3.4 is still a Release Candidate. You can install it by running <code>npm install typescript@next</code>.</p>
<h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><p>Let’s have a look at the following example. Imagine that you’re fetching a collection of objects from some backend service and you need to map this collection to an array of identifiers.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Person &#123;</span><br><span class="line">  id: <span class="built_in">string</span>;</span><br><span class="line">  name: <span class="built_in">string</span>;</span><br><span class="line">  birthYear: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getIds</span>(<span class="params">persons: Person[]</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> persons.map(<span class="function"><span class="params">person</span> =&gt;</span> person.id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Next, you decide to generalize <code>getIds</code> function so that it works on any collection of objects having the <code>id</code> property.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getIds</span>&lt;<span class="title">T</span> <span class="title">extends</span> <span class="title">Record</span>&lt;'<span class="title">id</span>', <span class="title">string</span>&gt;&gt;(<span class="params">elements: T[]</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> elements.map(<span class="function"><span class="params">el</span> =&gt;</span> el.id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Fair enough. However, the code for this simple function is quite verbose. Can we make it more concise?</p>
<h2 id="Pointfree-style"><a href="#Pointfree-style" class="headerlink" title="Pointfree style"></a>Pointfree style</h2><p>Sure, we can take advantage of a functional programming technique called <strong>pointfree style</strong>. <a href="http://ramdajs.com" target="_blank" rel="noopener">Ramda</a> is a nice library that will let us compose this function from other functions: <code>map</code> and <code>prop</code>.</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> R <span class="keyword">from</span> <span class="string">'ramda'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> getIds = R.map(R.prop(<span class="string">'id'</span>));</span><br></pre></td></tr></table></figure>
<p><code>map</code> is <em>partially applied</em> with a mapper function <code>prop</code> which extracts the <code>id</code> property from any object. The result of <code>getIds</code> is a function that accepts a collection of object. You can read a more detailed explanation in my article about <a href="https://codewithstyle.info/Better-RxJS-code-with-pointfree-style/">pointfree style</a>.</p>
<p>Sadly, TypeScript (pre 3.4) has bad news for you. The type of <code>getIds</code> is infered to <code>(list: {}) =&gt; {}</code> which is not exactly what you’d expect.</p>
<p>You can explicitly type <code>map</code> but it makes the expression really verbose:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getIds = R.map&lt;Record&lt;<span class="string">'id'</span>, <span class="built_in">string</span>&gt;, <span class="built_in">string</span>&gt;(R.prop(<span class="string">'id'</span>));</span><br></pre></td></tr></table></figure>
<p>This is where <em>propagated generic type arguments</em> come in. In TypeScript 3.4 the type of <code>getIds</code> will correctly infer to <code>&lt;T&gt;(list: readonly Record&lt;&quot;id&quot;, T&gt;[]) =&gt; T[]</code>. Success!</p>
<h2 id="Propagated-generic-type-arguments"><a href="#Propagated-generic-type-arguments" class="headerlink" title="Propagated generic type arguments"></a>Propagated generic type arguments</h2><p>Now that we now what <em>propagated generic type arguments</em> is about, let’s decipher the name.</p>
<p><code>R.map(R.prop(&#39;id&#39;))</code> is an example of a situation when we pass a generic function as an argument to another generic function. </p>
<p>Before version 3.4 TypeScript the type of parameters of inner function type was not <em>propagated</em> to the result type of the call.</p>
<h2 id="Why-should-I-care"><a href="#Why-should-I-care" class="headerlink" title="Why should I care?"></a>Why should I care?</h2><p>Even if you’re not particularly excited about pointfree style programming, bear in mind that some popular libraries that rely on function composition and partial application and will also benefit from this change.</p>
<p>For example, in <a href="https://rxjs.dev" target="_blank" rel="noopener">RxJS</a> it is possible to compose new operators from existing ones using <code>pipe</code> <strong>function</strong> (as opposed to <code>pipe</code> method). TypeScript 3.4 will certainly improve typing in such scenarios.</p>
<p>Other examples include Redux (<code>compose</code> for middleware) and Reselect.</p>
<h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>Introduction of <em>propagated generic type arguments</em> has significany consequences for pointfree style programming. Before this update, using libraries such as <code>ramda</code> or <code>lodash/fp</code> with TypeScript was really cumbersome - you had to explicitly provide type arguments to certain calls which made the code far less readable. </p>
<p><strong>TL;DR</strong>: <em>Propagated generic type arguments</em> pave the way for wider adoption of functional programming techniques in TypeScript.</p>
<hr>
<p>Cover photo: <a href="https://pixabay.com/pl/users/JamesDeMers-3416/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=82592" target="_blank" rel="noopener"> JamesDeMers</a> from <a href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=82592" target="_blank" rel="noopener"> Pixabay</a>.</p>


                    
<hr>
<p class="f5 bg-dark-gray br3 pa3 white">
  Did you like this TypeScript article? I bet you'll also like my book!<br>
  <a href="https://typescriptmasterclass.com">
    ⭐️ Advanced TypeScript E-book ⭐️
  </a>
</p>



                    <div class="social-sharing pv3">
                      <h5 class="mv1">Enjoyed it? Let others hear about it too! ❤️</h5>
                      <div class="flex items-center">
                        <a class="twitter-share-button" href="https://twitter.com/intent/tweet?text=TypeScript 3.4 hidden gem: propagated generic type arguments by @miloszpp" data-size="large">
                          Tweet
                        </a>
                        <div class="fb-share-button mh1" data-href="" data-layout="button_count" data-size="large">
                        </div>
                      </div>
                    </div>
                    
                    <!-- Tags Bottom -->
                    
                        <div class="tags-container-bottom">
                            <i class="fa fa-tag pr3 text-main-color"></i><a class="fw3 ph1 dib" href="/tags/typescript/">#typescript</a> <a class="fw3 ph1 dib" href="/tags/functional-programming/">#functional programming</a> <a class="fw3 ph1 dib" href="/tags/pointfree-style/">#pointfree style</a>
                        </div>
                    

                    <!-- Comments -->
                    
<div id="disqus_thread" class="mt5">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>



                    

                </div>
                <div class="fl w-100 w-30-l center fw3 lh-copy pl4-ns tl black-50">
                <hr class="dn-l mw4 black-50 mt5">

<div class="mt5 mt0-l">
    <article class="dt db-l mw8 mw8-m mw5-ns center ml0-l bg-white mv3">
        <div class="dn dtc-m db-l v-mid tc pr4 pr0-l" style="min-width: 6rem;">
            <img src="/images/speaker-avatar-2.png" class="mb4-l br-100 h3 w3 h4-l w4-l dib" title="Miłosz Piechocki">
        </div>
        <div class="dtc db-l v-mid lh-copy measure center f6 black-50 tj">
            Hi! My name is Miłosz Piechocki. I’m a software developer living in Warsaw, Poland. I’m passionate about TypeScript, JavaScript and functional programming in modern web development.
        </div>
        <div class="mt3">
          <a class="twitter-follow-button" data-show-count="false" href="https://twitter.com/miloszpp">
            Follow me on Twitter</a>
        </div>
    </article>
</div>

<hr class="dn-l mw4 black-50 mt5">

<div class="mt5 tc tl-l">
  <h3>Download free e-book</h3>
  <a href="http://typescriptmasterclass.com/10tips" target="_blank"><img src="/images/10tips.png"></a>
</div>

<div class="mt5 tc tl-l">
  <h3>Buy my book</h3>
  <a href="http://typescriptmasterclass.com" target="_blank"><img src="/images/AdvancedTypeScript.jpg"></a>
</div>

<hr class="dn-l mw4 black-50 mt5">

                </div>
            </div>
        </div>
    </div>
</div>


<!-- Footer -->
<div class="bg-1 ph2 ph5-ns pv5">
    <div class="mv8">
        <div class="center tc">
            
                <div class="dib mh3">
                    <a class="f3 f2-ns white dim" href="http://twitter.com/miloszpp/" target="_blank">
                        <i class="fab fa-twitter"></i>
                    </a>
                </div>
            
                <div class="dib mh3">
                    <a class="f3 f2-ns white dim" href="http://facebook.com/codewithstyle.info/" target="_blank">
                        <i class="fab fa-facebook"></i>
                    </a>
                </div>
            
                <div class="dib mh3">
                    <a class="f3 f2-ns white dim" href="https://github.com/miloszpp" target="_blank">
                        <i class="fab fa-github"></i>
                    </a>
                </div>
            
                <div class="dib mh3">
                    <a class="f3 f2-ns white dim" href="https://www.youtube.com/channel/UC_DEBDpgRyBZAT85tJ1QZBw" target="_blank">
                        <i class="fab fa-youtube"></i>
                    </a>
                </div>
            
                <div class="dib mh3">
                    <a class="f3 f2-ns white dim" href="mailto:milosz@miloszpiechocki.com" target="_blank">
                        <i class="fas fa-envelope"></i>
                    </a>
                </div>
            
                <div class="dib mh3">
                    <a class="f3 f2-ns white dim" href="/atom.xml" target="_blank">
                        <i class="fas fa-rss"></i>
                    </a>
                </div>
            
        </div>
        <div class="f6 f5-ns center tc white pt5 fw3">
            @Copyright Miłosz Piechocki. All right reserved | Design & Hexo based on Anodyne by <a class="link dim white" href="http://www.codeblocq.com/">Jonathan Klughertz</a>
        </div>
    </div>
</div>

  <!-- Load Facebook SDK for JavaScript -->
  <div id="fb-root"></div>
  <script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v3.0";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));</script>

<!-- After Footer -->
<!-- Disqus Comments -->

<script type="text/javascript">
    var disqus_shortname = 'codewithstyle';

    (function(){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



</body>

</html>