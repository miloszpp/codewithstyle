<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head><meta name="generator" content="Hexo 3.8.0">

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="In the first post of the series, we’ve discussed which elements of the JavaScript language might be useful when writing functional code. Let’s now see">
    

    <!--Author-->
    
        <meta name="author" content="Miłosz Piechocki">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="Functional JavaScript part 2: array operations">
    

    <!--Open Graph Description-->
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="codewithstyle.info">

    <!--Type page-->
    
        <meta property="og:type" content="article">
    

    <!--Page Cover-->
    

    <meta name="twitter:card" content="summary">
    

    <!-- Title -->
    
    <title>Functional JavaScript part 2: array operations - codewithstyle.info</title>

    <!-- Tachyons Core CSS -->
    <link rel="stylesheet" href="//unpkg.com/tachyons/css/tachyons.min.css">

    <!-- Custom Fonts -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Google Analytics -->
    


</head>


<body>

<!-- Main Content -->
<!-- Banner -->
<!-- Banner -->
<div class="w-100 bg-1 text-light">
    
    <div class="w-100">
        <nav class="db flex-l pv3 mw8 center items-center-l">
            <a class="db v-mid link dim w-100 w-25-l tc tl-l mb2 mb0-l white" href="/" title="codewithstyle.info">
                <img src="https://codewithstyle.info/wp-content/uploads/2017/07/CODE-WITHSTYLE-1.png" class="dib h3" alt="codewithstyle.info">
            </a>
            <div class="db v-mid w-100 w-75-l tc tr-l">
                
                    <a class="link dim f6 f5-l dib mr3 mr4-l white" href="/" title="Home">
                        Home
                    </a>
                
                    <a class="link dim f6 f5-l dib mr3 mr4-l white" href="/functional-programming" title="Functional Programming">
                        Functional Programming
                    </a>
                
                    <a class="link dim f6 f5-l dib mr3 mr4-l white" href="/archives" title="Archives">
                        Archives
                    </a>
                
                    <a class="link dim f6 f5-l dib mr3 mr4-l white" href="http://miloszpiechocki.com/" title="Author">
                        Author
                    </a>
                
            </div>
        </nav>
    </div>

    <!-- Title -->
    <div class="w-100 vh-40 dt">
        <div class="v-mid white center mw8">
            <h1 class="f1-l f2-m tc tc-m tl-ns">Functional JavaScript part 2: array operations</h1>
            <p class="f4 fw3 pab-100px tc tc-m tl-ns">2017-08-02</p>
        </div>
    </div>

    <!-- Icon -->
    <div class="relative w-100 mw8 center white dn dn-m db-ns">
        <i class="header-icon "></i>
    </div>
</div>

<!-- Content -->
<div class="w-100 ph2 ph4-m ph5-l mv5 mv6-l">
    <div class="content">
        <div class="mw8 center">
            <div class="cf">
                <div class="fl w-100 w-70-l mw7 left fw3 lh-copy pr4-ns pr0-m post-content">
                    <!-- Tags Vertical -->
                    

                    <!-- Main Post Content -->
                    <p>In the <a href="http://codewithstyle.info/functional-javascript-part-1-introduction/">first post of the series</a>, we’ve discussed which elements of the JavaScript language might be useful when writing functional code. Let’s now see the most obvious example of functional programming in JavaScript - array operations. <strong>This post is part of the <a href="https://codewithstyle.info/functional-programming-javascript-plain-words/">Functional Programming in JavaScript series</a>.</strong></p>
<h3 id="Imperative-approach-to-arrays"><a href="#Imperative-approach-to-arrays" class="headerlink" title="Imperative approach to arrays"></a>Imperative approach to arrays</h3><p>Arrays are a basic programming construct present in most of programming languages. They let us deal with situations where we need to store or operate on multiple instances of some piece of data. As I already explained, imperative programming is all about executing instructions in a sequence. We can use various kinds of loops to deal with arrays. Usually, the loop body describes what to do to each element of an array. Let’s have a look at the for loop in JavaScript. The below example iterates over an array and prints each element.</p>
<p>var books = [ “Gone with the Wind”, “War and Peace” ];<br>for (var i = 0; i &lt; books.length; i++) {<br>  console.log(books[i]);<br>}</p>
<p>This code looks very familiar. Is there anything wrong with it? The problem that we are solving here can be stated as <em>print every element of given array of books</em>. However, there is much more going on in this piece of code:</p>
<ul>
<li>Declare an index variable and initialize it to zero</li>
<li>Increment this variable by one until it exceeds the length of the array</li>
<li>For each step use that variable to access i-th element of the array and print it</li>
</ul>
<p>Won’t you agree that while our intent is very simple, the above process is quite complex? What’s worse, there are many things that we can get wrong in this code - initialize the index to 1, use &lt;= instead of &lt;, forget about incrementing the index variable. This is because we have to be very specific about how to iterate the array and it’s quite easy to miss something. We could rewrite this code using the while  loop. However, it wouldn’t really buy as anything since the process would be roughly the same, only written in different way. <em>Actually, using the for…of construct from ES6 would be a big improvement in readability while still being imperative code. I’ll talk about it in one of the future posts. For now, let’s skip over it.</em></p>
<h3 id="ForEach"><a href="#ForEach" class="headerlink" title="ForEach"></a>ForEach</h3><p>As I’ve already mentioned in the first post of the series, we can rewrite this code in a more functional way:</p>
<p>books.forEach(function (book) {<br>  console.log(book);<br>});</p>
<p>What’s going on here? We’re calling the build-in forEach  method on the books  array. forEach is kind of special because it accepts a function as one of it’s parameters. In functional programming, we have a special name for functions which accept (or return) other functions as parameters - <strong>higher order functions</strong>. But what does forEach  actually do? It runs given function on every element of an array. So basically, it does exactly the same thing as the for loop above but it hides the ugly details of having an index variable and incrementing it. Isn’t that cool? Let’s break it down a bit. Instead of using an anonymous function, let’s use a named function:</p>
<p>function printBook(book) {<br>  console.log(book);<br>}<br>books.forEach(printBook);</p>
<p>Now, calling books.forEach(printBook) is essentially equivalent to:</p>
<p>printBook(books[0]);<br>printBook(books[1]);<br>…<br>printBook(books[books.length - 1]);</p>
<h3 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h3><p>I hope you agree that the forEach loop improved our code on multiple levels. However, we can observe a much more spectacular improvement with the following example. Let’s have a look at the following use case: <em>given an array of post ids, return an array of post objects</em>. Let’s assume that we have a REST API available that will return a post object given a post id (we will use an actual API from <a href="https://jsonplaceholder.typicode.com" target="_blank" rel="noopener">https://jsonplaceholder.typicode.com</a>).</p>
<p>var webApiUrl = “<a href="https://jsonplaceholder.typicode.com/posts/&quot;" target="_blank" rel="noopener">https://jsonplaceholder.typicode.com/posts/&quot;</a>;<br>var postIds = [1, 4, 5];<br>var postPromises = [];</p>
<p>for (var i = 0; i &lt; postIds.length; i++) {<br>  var promise = fetch(webApiUrl + postIds[i]).then(response =&gt; response.json());<br>  postPromises.push(promise);<br>}</p>
<p>Promise.all(postPromises).then(posts =&gt; console.log(posts));</p>
<p>In the above piece, we iterate over the array of ids. For each id we call the REST API using <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API" target="_blank" rel="noopener">fetch</a> and get a promise object in return. We push this object to a special array postPromises  where we store the results. Finally, we call Promise.all  which would transfer the array of promises into a single promise containing the desired array of posts (<em>if you’re not familiar with promises, here is a <a href="https://developers.google.com/web/fundamentals/getting-started/primers/promises" target="_blank" rel="noopener">good read</a>).</em> That seems like a lot of code to do such a simple thing! And we have even more “imperative code overhead” - not only we need to maintain the index variable but we also have to create an array to which we will add results of the fetch  call, one by one. Let’s now see a functional solution to the same problem.</p>
<p>var webApiUrl = “<a href="https://jsonplaceholder.typicode.com/posts/&quot;" target="_blank" rel="noopener">https://jsonplaceholder.typicode.com/posts/&quot;</a>;<br>var postIds = [1, 4, 5];</p>
<p>var postPromises = postIds.map(postId =&gt; fetch(webApiUrl + postId).then(response =&gt; response.json()));</p>
<p>Promise.all(postPromises).then(posts =&gt; console.log(posts));</p>
<p>So what does map  do? It takes an array and transforms it to another array by applying given function on each element. Let’s see how it is different from forEach:</p>
<ul>
<li>forEach  runs given function on each element</li>
<li>map  runs given function on each element and collects the returned values, producing a new array</li>
</ul>
<p><img src="http://codewithstyle.info/wp-content/uploads/2017/08/Map-explained.png" alt="" title="Map explained"></p>
<h3 id="Filter"><a href="#Filter" class="headerlink" title="Filter"></a>Filter</h3><p>So far the functions we’ve discussed operated on all elements of an array. What if we would like to apply some operation only to some elements of an array? In other words, what if we wanted to filter out some elements? As usual, let’s see an example of an imperative approach first. We will extend the example from the previous post: _given an array of post ids, return an array of posts _<strong><em>but only for even ids</em></strong>. In the imperative version, we can simply filter out odd ids by adding an if  statement:</p>
<p>var webApiUrl = “<a href="https://jsonplaceholder.typicode.com/posts/&quot;" target="_blank" rel="noopener">https://jsonplaceholder.typicode.com/posts/&quot;</a>;<br>var postIds = [1, 4, 5];<br>var postPromises = [];</p>
<p>for (var i = 0; i &lt; postIds.length; i++) {<br>  if (postIds[i] % 2 == 0) {<br>    var promise = fetch(webApiUrl + postIds[i]).then(response =&gt; response.json());<br>    postPromises.push(promise);<br>  }<br>}</p>
<p>Promise.all(postPromises).then(posts =&gt; console.log(posts));</p>
<p>Let’s now have a look at a functional version:</p>
<p>var webApiUrl = “<a href="https://jsonplaceholder.typicode.com/posts/&quot;" target="_blank" rel="noopener">https://jsonplaceholder.typicode.com/posts/&quot;</a>;<br>var postIds = [1, 4, 5];</p>
<p>var postPromises = postIds<br>  .filter(postId =&gt; postId % 2 == 0)<br>  .map(postId =&gt; fetch(webApiUrl + postId).then(response =&gt; response.json()));</p>
<p>Promise.all(postPromises).then(posts =&gt; console.log(posts));</p>
<p>We’ve added a call to the filter  function. The filter  function takes a <strong>filtering function</strong> and applies it to every element of an array. If the value returned by the filtering function is false, than given element is not included in the resulting array. In other words, the filtering function is used to decide which elements should stay and which should be filtered out. <img src="http://codewithstyle.info/wp-content/uploads/2017/08/filter-explained.png" alt="" title="filter explained"> In the above example, you can already see how easily we can <strong>chain</strong> invocations of higher order functions. This is because every such function is invoked on an array and returns an array. With such code, the <strong>data flow</strong> is immediately visible and easy to understand. What I mean by that is that it’s easy to understand how the array is transformed. <img src="http://codewithstyle.info/wp-content/uploads/2017/08/chaining-higher-order-functions-1.png" alt="" title="chaining higher order functions"></p>
<h3 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h3><p>In this post we’ve discussed three very useful functions which allow you to better articulate your intents with code. What’s more, using these functions might result in less buggy code - they present fewer opportunities to make a bug then traditional, imperative code. The forEach  example was basic and rather theoretical while the other examples were taken from a real-world situation. In the next post, we will continue exploring the world of higher order functions by looking at  reduce. If you have any issues understanding anything in this post or if you simply would like to provide feedback, please leave a comment below. I want this course to be as good as possible and I need your help for that! If you found this post helpful, please consider sharing it on Facebook or Twitter.</p>

                    
                    <!-- Tags Bottom -->
                    

                    <!-- Comments -->
                    



                </div>
                <div class="fl w-100 w-30-l center fw3 lh-copy pl4-ns tl black-50">
                    
                    <hr class="dn-l mw4 black-50 mt5">
                    
                    <div class="mt5 mt0-l">
    <article class="dt db-l mw8 mw8-m mw5-ns center ml0-l bg-white mv3">
        <div class="dn dtc-m db-l v-mid tc pr4 pr0-l" style="min-width: 6rem;">
            <img src="https://codewithstyle.info/wp-content/uploads/2017/02/miloszpiechocki.jpeg" class="mb4-l br-100 h3 w3 h4-l w4-l dib" title="Miłosz Piechocki">
        </div>
        <div class="dtc db-l v-mid lh-copy measure center f6 black-50 tj">
            Hi! My name is Miłosz Piechocki. I’m a software developer living in Warsaw, Poland. I’m passionate about functional programming and in particular how it’s applied in modern web technologies.
        </div>
    </article>
</div>

                    <hr class="dn-l mw4 black-50 mt5">

                    <div class="mt5 tc tl-l">
    <h3>Download free e-book</h3>
    <p class="tj f6 lh-copy">Subscribe to receive updates about new posts and I will send you a link to a free e-book about functional programming in JavaScript.</p>
    <!-- Begin Mailchimp Signup Form -->
    <div id="mc_embed_signup">
        <form action="https://codewithstyle.us15.list-manage.com/subscribe/post?u=9387aca2477532e2e033cee17&amp;id=7c51853ca5" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate="">
            <div id="mc_embed_signup_scroll">
                <div class="mc-field-group">
                    <input class="pa2 input-reset ba bg-transparent w-100" type="email" value="" name="EMAIL" id="mce-EMAIL" placeholder="enter your email">
                </div>
                <div id="mce-responses" class="clear">
                    <div class="response" id="mce-error-response" style="display:none"></div>
                    <div class="response" id="mce-success-response" style="display:none"></div>
                </div>    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
                <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_9387aca2477532e2e033cee17_7c51853ca5" tabindex="-1" value=""></div>
                <div class="clear mt2">
                    <input class="b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6 dib" type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe">
                </div>
            </div>
        </form>
    </div>
    <!--End mc_embed_signup-->
</div>

                    
                </div>
            </div>
        </div>
    </div>
</div>


<!-- Footer -->
<div class="bg-1 ph2 ph5-ns pv5">
        <div class="mv8">
            <div class="center tc">
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="http://twitter.com/miloszpp/" target="_blank">
                            <i class="fab fa-twitter"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="http://facebook.com/codewithstyle.info/" target="_blank">
                            <i class="fab fa-facebook"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="https://github.com/miloszpp" target="_blank">
                            <i class="fab fa-github"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="https://www.youtube.com/channel/UC_DEBDpgRyBZAT85tJ1QZBw" target="_blank">
                            <i class="fab fa-youtube"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="mailto:milosz@miloszpiechocki.com" target="_blank">
                            <i class="fas fa-envelope"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="/#" target="_blank">
                            <i class="fas fa-rss"></i>
                        </a>
                    </div>
                
            </div>
            <div class="f6 f5-ns center tc white pt5 fw3">
                @Copyright Miłosz Piechocki. All right reserved | Design & Hexo based on Anodyne by <a class="link dim white" href="http://www.codeblocq.com/">Jonathan Klughertz</a>
            </div>
        </div>
    </div>

<!-- After Footer -->
<!-- Disqus Comments -->



</body>

</html>