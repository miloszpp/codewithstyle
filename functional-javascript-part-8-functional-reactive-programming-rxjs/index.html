<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!--Description-->
  
  <meta name="description" content="Let‚Äôs talk about RxJS - another concept that has recently established itself as an important part of modern JavaScript. In JavaScript applications you">
  

  <!--Author-->
  
  <meta name="author" content="Mi≈Çosz Piechocki">
  

  <!--Open Graph Title-->
  
  <meta property="og:title" content="Functional JavaScript part 8: functional-reactive programming with RxJS">
  

  <!--Open Graph Description-->
  

  <!--Open Graph Site Name-->
  <meta property="og:site_name" content="codewithstyle.info">

  <!--Type page-->
  
  <meta property="og:type" content="article">
  

  <!--Page Cover-->
  
  <meta name="twitter:card" content="summary">
   

  <!-- Title -->
  
  <title>Functional JavaScript part 8: functional-reactive programming with RxJS - codewithstyle.info</title>

  <!-- Tachyons Core CSS -->
  <link rel="stylesheet" href="//unpkg.com/tachyons/css/tachyons.min.css">

  <!-- Custom Fonts -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">

  
  <link rel="amphtml" href="https://codewithstyle.info/functional-javascript-part-8-functional-reactive-programming-rxjs//amp/index.html">
  

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/style.css">

  <!-- Google Analytics -->
  
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-89535231-1', 'auto');
        ga('send', 'pageview');

    </script>



  <!-- Twitter -->
  <script>
    window.twttr = (function (d, s, id) {
      var js,
        fjs = d.getElementsByTagName(s)[0],
        t = window.twttr || {};
      if (d.getElementById(id)) return t;
      js = d.createElement(s);
      js.id = id;
      js.src = "https://platform.twitter.com/widgets.js";
      fjs.parentNode.insertBefore(js, fjs);

      t._e = [];
      t.ready = function (f) {
        t._e.push(f);
      };

      return t;
    })(document, "script", "twitter-wjs");
  </script>

  <!-- MailerLite Universal -->
  <script>
    (function (m, a, i, l, e, r) {
      m["MailerLiteObject"] = e;
      function f() {
        var c = { a: arguments, q: [] };
        var r = this.push(c);
        return "number" != typeof r ? r : f.bind(c.q);
      }
      f.q = f.q || [];
      m[e] = m[e] || f.bind(f.q);
      m[e].q = m[e].q || f.q;
      r = a.createElement(i);
      var _ = a.getElementsByTagName(i)[0];
      r.async = 1;
      r.src = l + "?v" + ~~(new Date().getTime() / 1000000);
      _.parentNode.insertBefore(r, _);
    })(
      window,
      document,
      "script",
      "https://static.mailerlite.com/js/universal.js",
      "ml"
    );

    var ml_account = ml("accounts", "1785990", "w8k8t0a5z1", "load");
  </script>
  <!-- End MailerLite Universal -->
</head>


<body>

<!-- Main Content -->
<!-- Banner -->
<!-- Banner -->
<div class="w-100 bg-1 text-light">
  <div class="w-100">
    <nav class="db flex-l pv3 mw8 center items-center-l">
      <a class="db v-mid link dim w-100 w-25-l tc tl-l mb2 mb0-l white" href="/" title="codewithstyle.info">
        <img src="/images/2017/07/CODE-WITHSTYLE-1.png" class="dib h3" alt="codewithstyle.info">
      </a>
      <div class="db v-mid w-100 w-75-l tc tr-l">
        
        <a class="link dim f6 f5-l dib mr3 mr4-l white" href="/toc" title="Table of Contents">
          Table of Contents
        </a>
        
        <a class="link dim f6 f5-l dib mr3 mr4-l white" href="/tags/typescript" title="TypeScript">
          TypeScript
        </a>
        
        <a class="link dim f6 f5-l dib mr3 mr4-l white" href="/functional-programming" title="Functional Programming">
          Functional Programming
        </a>
        
        <a class="link dim f6 f5-l dib mr3 mr4-l white" href="http://miloszpiechocki.com/" title="Author">
          Author
        </a>
        
      </div>
    </nav>
  </div>

  <!-- Title -->
  <div class="w-100 vh-40 dt" style="background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)),
    url('images/homepage.png'); background-size: cover; background-position: center">
    <div class="v-mid white center mw8">
      <h1 class="f1-l f2-m tc tc-m tl-ns">Functional JavaScript part 8: functional-reactive programming with RxJS</h1>
      <p class="f4 fw3 pab-100px tc tc-m tl-ns">2017-09-24</p>
    </div>
  </div>

  <div class="w-100 bt">
    <section class="pa2 mw8 center white">
      <a class="link white dim" href="https://typescriptmasterclass.com">
        üî• Check out my <em>Advanced TypeScript Masterclass book</em> üî•
      </a>
    </section>
  </div>
</div>


<!-- Content -->
<div class="w-100 ph2 ph4-m ph5-l mv5 mv6-l">
    <div class="content">
        <div class="mw8 center">
            <div class="cf">
                <div class="fl w-100 w-70-l mw7 left fw3 lh-copy pr4-ns pr0-m post-content">
                    <!-- Tags Vertical -->
                    
                        <div class="tags-container-vertical">
                            <div class="tags-sub-container">
                                <a class="fw3 ph1 dib" href="/tags/functional-programming/">#functional programming</a> <a class="fw3 ph1 dib" href="/tags/rxjs/">#rxjs</a>
                            </div>
                        </div>
                    

                    <!-- Main Post Content -->
                    <p>Let‚Äôs talk about RxJS - another concept that has recently established itself as an important part of modern JavaScript. In JavaScript applications you sometimes have to deal with streams of asynchronous events. For example, events could be produced by the user (button clicks, key presses) or pushed by a backend server (via web sockets or some other mechanism). </p>
<p>Given that applications are becoming more and more complex, it might become tricky to manage these streams in a traditional way (with callbacks). <strong>Reactive programming</strong> is a programming paradigm in which streams of data are central and therefore it‚Äôs much easier to work with them. <a href="https://github.com/Reactive-Extensions/RxJS" target="_blank" rel="noopener"><strong>RxJS</strong></a> is a <strong>functional reactive programming</strong> library. It means that it leverages functional techniques to facilitate dealing with event streams. In simple words, it lets you use the same <a href="https://codewithstyle.info/functional-javascript-part-2-array-operations/">operations that you learned to perform on arrays</a> on event streams. </p>
<p><strong>This post is part of the <a href="https://codewithstyle.info/functional-programming-javascript-plain-words/">Functional Programming in JavaScript series</a>.</strong></p>
<h3 id="Creating-observables-from-events"><a href="#Creating-observables-from-events" class="headerlink" title="Creating observables from events"></a>Creating observables from events</h3><p>RxJS introduces the concept of <strong>observable</strong>. An observable represents a stream of data (or events). Given an observable you can <strong>subscribe</strong> to it. When subscribing you provide a callback which will be fired every time a new item is popped out of the stream. Let‚Äôs take a text input field and create an observable that will represent the stream of keys typed into it.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://unpkg.com/@reactivex/rxjs@5.0.0-beta.12/dist/global/Rx.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"textInput"</span> <span class="attr">type</span>=<span class="string">"text"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> textInput = <span class="built_in">document</span>.getElementById(<span class="string">"textInput"</span>);</span><br><span class="line"><span class="keyword">var</span> keyStream = Rx.Observable.fromEvent(textInput, <span class="string">'keyup'</span>);</span><br></pre></td></tr></table></figure>
<p>As you can see, it‚Äôs pretty straightforward. RxJS allows us to easily convert classic JavaScript events to observables. Let‚Äôs now subscribe to this observable.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">keyStream.subscribe(<span class="function"><span class="params">e</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">"Key pressed: "</span>, e.key));</span><br></pre></td></tr></table></figure>
<h3 id="Introducing-functional-operators"><a href="#Introducing-functional-operators" class="headerlink" title="Introducing functional operators"></a>Introducing functional operators</h3><p>I promised that RxJS has something to do with functional programming. Do you remember the filter operation? It would take an array and a predicate function and filter out elements which don‚Äôt satisfy the predicate. With RxJS you can treat the stream of events as if it were a regular JavaScript array. Can you guess the result of applying filter to our keyStream?</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">keyStream</span><br><span class="line">  .filter(<span class="function"><span class="params">e</span> =&gt;</span> e.key === e.key.toUpperCase())</span><br><span class="line">  .subscribe(<span class="function"><span class="params">e</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">"Capital key pressed: "</span>, e.key));</span><br></pre></td></tr></table></figure>
<p>Calling filter  on an observable creates a new observable which will only emit events that satisfy the predicate. In the above example we‚Äôre only passing on key presses if they are capital letters. </p>
<p><img src="/images/2017/09/filter.png" alt="" title="filter"> </p>
<p>Other array operations that you‚Äôve learned such as map  or reduce  can also be applied to observables.</p>
<h3 id="Combining-observables"><a href="#Combining-observables" class="headerlink" title="Combining observables"></a>Combining observables</h3><p>Let‚Äôs say that every time a user types an upper case character we would like to perform a search using some REST API. We can do this elegantly using RxJS! We need to start thinking in terms of streams. We have a stream of key presses. Let‚Äôs transform it into a stream of search results coming from the REST service. What would we use if we wanted to transform an array-of-something to an array-of-something-else? We would use map. And this is exactly what we will use now.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">keyStream</span><br><span class="line">  .filter(<span class="function"><span class="params">e</span> =&gt;</span> e.key === e.key.toUpperCase())</span><br><span class="line">  .map(<span class="function"><span class="params">e</span> =&gt;</span> fetch(<span class="string">"https://jsonplaceholder.typicode.com/posts?search="</span> + e.key));</span><br></pre></td></tr></table></figure>
<p>We use fetch to make the call to the backend server. However, fetch returns a promise so what we‚Äôve done so far is transformed the stream of keys to a stream of promises. Not exactly what we wanted. Fortunately, it‚Äôs trivial to convert a promise to an observable.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">keyStream</span><br><span class="line">  .filter(<span class="function"><span class="params">e</span> =&gt;</span> e.key === e.key.toUpperCase())</span><br><span class="line">  .map(<span class="function"><span class="params">e</span> =&gt;</span> Rx.Observable.fromPromise(fetch(<span class="string">"https://jsonplaceholder.typicode.com/posts?search="</span> + e.key)));</span><br></pre></td></tr></table></figure>
<p>There is one more problem with this though. At the moment we‚Äôre mapping each key press to an observable. Therefore, we‚Äôve transformed an observable of keys to an observable of observables! In other words, for each key we will get a separate observable. It‚Äôs not perfect. We would much rather interact with a single observable instead. For that we need to combine the observables from the stream into a single one. Fortunately, there is an operator for that!</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">keyStream</span><br><span class="line">  .filter(<span class="function"><span class="params">e</span> =&gt;</span> e.key === e.key.toUpperCase())</span><br><span class="line">  .flatMap(<span class="function"><span class="params">e</span> =&gt;</span> Rx.Observable.fromPromise(fetch(<span class="string">"https://jsonplaceholder.typicode.com/posts?search="</span> + e.key)))</span><br><span class="line">  .subscribe(<span class="function"><span class="params">data</span> =&gt;</span> <span class="built_in">console</span>.log(data));</span><br></pre></td></tr></table></figure>
<p>flatMap  takes a stream and a function mapping each event to another observable. Then it combines all of the resulting observables into a single one. </p>
<p><img src="/images/2017/09/flatMap.png" alt="" title="flatMap"> </p>
<p><code>flatMap</code> is an extremely important operation in the world of functional programming. It is a very high-level abstraction which allows you to combine structures. For example, there is a variant of flatMap  for array operations in the <a href="https://lodash.com/docs/4.17.4#flatMap" target="_blank" rel="noopener">lodash</a> library. Its purpose is to take an array of arrays and combine the nested arrays into a single array. Can you see the pattern emerging?</p>
<h3 id="Other-non-functional-operators"><a href="#Other-non-functional-operators" class="headerlink" title="Other non-functional operators"></a>Other non-functional operators</h3><p>There are many other interesting operators in RxJS which are not rooted in functional programming but are definitely worth exploring. Let‚Äôs finish off our example with one more improvement. At some point we might realize that calling the REST service after every key press is killing performance in our app. One possible solution to this is to only fire the request after some time passed since the last request. This would be a nightmare to implement with callbacks or promises. With RxJS it‚Äôs a matter of a single line</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">keyStream</span><br><span class="line">  .filter(<span class="function"><span class="params">e</span> =&gt;</span> e.key === e.key.toUpperCase())</span><br><span class="line">  .debounceTime(<span class="number">500</span>)</span><br><span class="line">  .map(<span class="function"><span class="params">e</span> =&gt;</span> Rx.Observable.fromPromise(fetch(<span class="string">"https://jsonplaceholder.typicode.com/posts?search="</span> + e.key)));</span><br><span class="line">  .subscribe(<span class="function"><span class="params">data</span> =&gt;</span> <span class="built_in">console</span>.log(data));</span><br></pre></td></tr></table></figure>
<p><code>debounceTime</code> will do exactly what we want. It will wait 500 milliseconds after each key press. It will only emit this key press if there are no successful key presses in the incoming 500 milliseconds.</p>
<h3 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h3><p>I‚Äôve just scratched the surface of RxJS in this post. There are many other interesting operators which I encourage you to explore. Most importantly, it should all be much easier now once you are familiar with array operations. Once again you can see how universal the ideas in functional programming are. If you have any issues understanding anything in this post or if you simply would like to provide feedback, please leave a comment below. I want this course to be as good as possible and I need your help for that! If you found this post helpful, please consider sharing it on Facebook or Twitter.</p>


                    


                    <div class="social-sharing pv3">
                      <h5 class="mv1">Enjoyed it? Let others hear about it too! ‚ù§Ô∏è</h5>
                      <div class="flex items-center">
                        <a class="twitter-share-button" href="https://twitter.com/intent/tweet?text=Functional JavaScript part 8: functional-reactive programming with RxJS by @miloszpp" data-size="large">
                          Tweet
                        </a>
                        <div class="fb-share-button mh1" data-href="441.html" data-layout="button_count" data-size="large">
                        </div>
                      </div>
                    </div>
                    
                    <!-- Tags Bottom -->
                    
                        <div class="tags-container-bottom">
                            <i class="fa fa-tag pr3 text-main-color"></i><a class="fw3 ph1 dib" href="/tags/functional-programming/">#functional programming</a> <a class="fw3 ph1 dib" href="/tags/rxjs/">#rxjs</a>
                        </div>
                    

                    <!-- Comments -->
                    
<div id="disqus_thread" class="mt5">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>



                    

                </div>
                <div class="fl w-100 w-30-l center fw3 lh-copy pl4-ns tl black-50">
                <hr class="dn-l mw4 black-50 mt5">

<div class="mt5 mt0-l">
    <article class="dt db-l mw8 mw8-m mw5-ns center ml0-l bg-white mv3">
        <div class="dn dtc-m db-l v-mid tc pr4 pr0-l" style="min-width: 6rem;">
            <img src="/images/speaker-avatar-2.png" class="mb4-l br-100 h3 w3 h4-l w4-l dib" title="Mi≈Çosz Piechocki">
        </div>
        <div class="dtc db-l v-mid lh-copy measure center f6 black-50 tj">
            Hi! My name is Mi≈Çosz Piechocki. I‚Äôm a software developer living in Warsaw, Poland. I‚Äôm passionate about TypeScript, JavaScript and functional programming in modern web development.
        </div>
        <div class="mt3">
          <a class="twitter-follow-button" data-show-count="false" href="https://twitter.com/miloszpp">
            Follow me on Twitter</a>
        </div>
    </article>
</div>

<hr class="dn-l mw4 black-50 mt5">

<div class="mt5 tc tl-l">
  <h3>Free download</h3>
  <a href="/10tips"><img src="/images/10tips.png"></a>
</div>

<hr class="dn-l mw4 black-50 mt5">

                </div>
            </div>
        </div>
    </div>
</div>


<!-- Footer -->
<div class="bg-1 ph2 ph5-ns pv5">
    <div class="mv8">
        <div class="center tc">
            
                <div class="dib mh3">
                    <a class="f3 f2-ns white dim" href="http://twitter.com/miloszpp/" target="_blank">
                        <i class="fab fa-twitter"></i>
                    </a>
                </div>
            
                <div class="dib mh3">
                    <a class="f3 f2-ns white dim" href="http://facebook.com/codewithstyle.info/" target="_blank">
                        <i class="fab fa-facebook"></i>
                    </a>
                </div>
            
                <div class="dib mh3">
                    <a class="f3 f2-ns white dim" href="https://github.com/miloszpp" target="_blank">
                        <i class="fab fa-github"></i>
                    </a>
                </div>
            
                <div class="dib mh3">
                    <a class="f3 f2-ns white dim" href="https://www.youtube.com/channel/UC_DEBDpgRyBZAT85tJ1QZBw" target="_blank">
                        <i class="fab fa-youtube"></i>
                    </a>
                </div>
            
                <div class="dib mh3">
                    <a class="f3 f2-ns white dim" href="mailto:milosz@miloszpiechocki.com" target="_blank">
                        <i class="fas fa-envelope"></i>
                    </a>
                </div>
            
                <div class="dib mh3">
                    <a class="f3 f2-ns white dim" href="/atom.xml" target="_blank">
                        <i class="fas fa-rss"></i>
                    </a>
                </div>
            
        </div>
        <div class="f6 f5-ns center tc white pt5 fw3">
            @Copyright Mi≈Çosz Piechocki. All right reserved | Design & Hexo based on Anodyne by <a class="link dim white" href="http://www.codeblocq.com/">Jonathan Klughertz</a>
        </div>
    </div>
</div>

  <!-- Load Facebook SDK for JavaScript -->
  <div id="fb-root"></div>
  <script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v3.0";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));</script>

<!-- After Footer -->
<!-- Disqus Comments -->

<script type="text/javascript">
    var disqus_shortname = 'codewithstyle';

    (function(){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



</body>

</html>